<html>
<head>
  <title>Test..</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<!-- includes
-------------------------------------------------------------------------------- -->

  <script src="js/jquery-1.3.1.min.js" type="text/javascript"></script> <!-- jQuery src -->
  <script src="js/contextMenu/jquery.contextMenu.js" type="text/javascript"></script> <!-- contextMenu plugin src -->
  <script src="js/flytabs/jquery.flytabs.js" type="text/javascript"></script> <!-- FlyTabs plugin src -->

  <script src="js/json2str.js" type="text/javascript"></script> <!-- .json2str() src -->
  <script src="js/str2json.js" type="text/javascript"></script> <!-- .str2json() src -->

  <script src="js/jquery.cookie.js" type="text/javascript"></script> <!-- cookies src -->

  <link href="js/contextMenu/jquery.contextMenu.css" rel="stylesheet" type="text/css" /> <!-- contextMenu plugin styles -->
  <link href="js/flytabs/flytabs_.css" rel="stylesheet" type="text/css" /> <!-- Fly Tabs plugin styles -->

<!-- scripts
-------------------------------------------------------------------------------- -->

  <script type="text/javascript">

    var debug = function(str) {
      $("#debug").prepend(str+"\n");
//      $("#debug").append(str+"\n");
    };
    
    
/* 
**********************************************************************

    // constructor
    var OElement = function() {
      
    };

    // fields and default values
    OElement.prototype = {
      field = "val"
      
    };

    // methods
    OElement.prototype.create = function(_html) {
      
    };

/* OEl - Function
**********************************************************************/

//    var objectIds = {};
    var objectCnt = 0;

//    var setHtml = function(_code, _object, _prefix) {
    var setHtml = function(_code, _prefix) {
      
      var _id = _prefix + objectCnt++;
      var _html = '<div id=' + _id + '>' + _code + '</div>';
      
//      debug(_id);
//      debug(_html);
      
      return {
        html: _html,
        id: _id
      }; 
    };
    
    var setButton = function(_code) {
      return setHtml(_code, 'button_');
    };
    
    var megaButton = function(_caption) {
      this.caption = _caption; // unsecure! todo
      this.draw();
    };
    
    megaButton.prototype.caption = "";
    megaButton.prototype.id = null;
    
    megaButton.prototype.draw = function() {
      var buttonHtml = '<input type=button value='+this.caption+' \><br>';
      var smartObject = setButton(buttonHtml);
      $('#buttons').append(smartObject.html);
      this.id = smartObject.id;
      bindButtonEvents('#' + this.id + ' input');
    };
    
    megaButton.prototype.hide = function() {
      debug("hide " + this.id);
//      $(this.id).css('visibility', 'hidden');
      $('#' + this.id + ' input').css('visibility', 'hidden');
    };
    
    megaButton.prototype.unhide = function() {
      debug("unhide " + this.id);
//      $(this.id).css('visibility', 'hidden');
      $('#' + this.id + ' input').css('visibility', '');
    };
    
    var bindButtonEvents = function(_el) {
      $(_el).click(function() {
        debug($(this).parent().attr("id"));
      });
    };
    

/* Ready
**********************************************************************/   

  $(document).ready(function() {
    /*
    objectIds['test'] = 333;
    debug(objectIds['test']);
    */
    
    var b1 = new megaButton('mmb');
    var b2 = new megaButton('mmv');
    
    $('#rm').click(function() {
      b2.hide();
//      debug('nya!');
    });
    
    $('#revieve').click(function() {
      b2.unhide();
//      debug('nya!');
    });
    
  });

    
  </script>

<!-- css styles
-------------------------------------------------------------------------------- -->

  <style type="text/css">
  
     body {
       background-color: #ccffcc;
     }
     
     #debug {
       border: 1px dotted red;
       color: black;
       width: 500px;
     }
     
      div.scroll {
/*       min-height: 2em; */
/*       max-height: 20em; */
       height: 15em;
       overflow: auto;
     }
    </style>
  </head>
  
  <!-- hardcoded html
-------------------------------------------------------------------------------- -->
  
  <body>
    
    <div id=buttons></div>
    
      <pre>
        <div id=debug class=scroll></div>
      </pre>
      
      <input type=button id=rm value="rm 2"/>
      <input type=button id=revieve value="revieve 2"/>
      
  </body>
</html>